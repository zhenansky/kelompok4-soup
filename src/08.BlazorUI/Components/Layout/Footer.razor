@inject HttpClient Http
@inject IConfiguration Configuration

<footer>
  <MudPaper Elevation="0" Class="footer-section">
    <MudContainer MaxWidth="MaxWidth.ExtraLarge">
      <MudGrid>

        @* About *@
        <MudItem xs="12" sm="6" md="4">
          <MudText Typo="Typo.h6" Class="footer-title mb-2">
            About Us
          </MudText>
          <MudText Class="footer-text">
            We believe that everyone can become a great chef. Our mission is to unlock your culinary potential through
            professional classes taught by experienced chefs. Join us to turn your passion into expertise.
          </MudText>
        </MudItem>

        @* Kategori (Menggantikan Produk) *@
        <MudItem xs="12" sm="6" md="3">
          <MudText Typo="Typo.h6" Class="footer-title mb-2">Kategori</MudText>
          <ul class="produk-list">
            @* Iterasi daftar Kategori yang diambil dari API *@
            @foreach (var category in Categories)
            {
              <li>
                @* Menggunakan MudLink agar bisa diklik dan bernavigasi *@
                <MudLink Href="@($"/menu/{category.Name}")" Color="Color.Inherit" Underline="Underline.Hover">
                  @category.Name
                </MudLink>
              </li>
            }
          </ul>
        </MudItem>

        @* Address & Contact *@
        <MudItem xs="12" sm="12" md="5">
          <MudText Typo="Typo.h6" Class="footer-title mb-2">Address</MudText>
          <MudText Typo="Typo.body1" Class="mb-2">
            @* Teks alamat yang sudah diperbarui *@
            Jl. Kuliner No. 123, Dapur Kencana,
            Jakarta Selatan, Indonesia 12345
          </MudText>

          <MudText Typo="Typo.h6" Class="footer-title mb-2">Contact Us</MudText>
          <MudStack Spacing="2" Row="true">
            <div class="social-icons">
              <MudIconButton Icon="@Icons.Material.Filled.Phone" Class="social-btn" />
              <MudIconButton Icon="@Icons.Custom.Brands.Instagram" Class="social-btn" />
              <MudIconButton Icon="@Icons.Material.Filled.PlayCircle" Class="social-btn" />
              <MudIconButton Icon="@Icons.Material.Filled.Send" Class="social-btn" />
              <MudIconButton Icon="@Icons.Material.Filled.Email" Class="social-btn" />
            </div>
          </MudStack>
        </MudItem>
      </MudGrid>
    </MudContainer>
  </MudPaper>
</footer>

@code {
  // 1. Daftar untuk menampung kategori dari API
  private List<CategoryDto> Categories = new();
  private string _apiBaseUrl = string.Empty;

  // 2. Metode OnInitializedAsync untuk mengambil data dari API saat komponen dimuat
  protected override async Task OnInitializedAsync()
  {
    _apiBaseUrl = (Configuration["ApiBaseUrl"] ?? "http://localhost:5099").TrimEnd('/');
    try
    {
      var response = await Http.GetFromJsonAsync<ApiResponse<List<CategoryDto>>>($"{_apiBaseUrl}/api/categories");
      if (response?.Success == true && response.Data != null)
      {
        Categories = response.Data;
      }
    }
    catch (Exception ex)
    {
      // Jika gagal, tampilkan di konsol (jangan hentikan rendering footer)
      Console.WriteLine($"Failed to fetch categories for footer: {ex.Message}");
    }
  }

  // 3. Kelas DTO (Data Transfer Object) yang diperlukan untuk API call
  public class ApiResponse<T>
  {
    public bool Success { get; set; }
    public T Data { get; set; }
    public string Message { get; set; }
  }

  public class CategoryDto
  {
    public int Id { get; set; }
    public string Name { get; set; }
  }
}

<style>
  .logo-img {
    width: 53.57px;
    height: 50px;
  }

  .footer-section {
    margin-top: 2.5rem;
    padding: 1.5rem;
    padding-left: 2.5rem;
    padding-right: 2.5rem;
    background-color: #5B4947;
    color: #E0E0E0;
  }

  .footer-title {
    color: #f4b526;
  }

  .footer-text {
    font-size: 14px;
    line-height: 1.6;
    margin-bottom: 20px;
    color: #ffffff;
  }

  .footer-list {
    list-style: disc;
    margin-left: 20px;
    color: #ffffff;
    font-size: 14px;
    line-height: 1.8;
  }

  .social-icons {
    display: flex;
    gap: 12px;
    margin-top: 10px;
  }

  .social-btn {
    background-color: #f4b526 !important;
    color: #2d2d2d !important;
    border-radius: 50% !important;
    width: 44px !important;
    height: 44px !important;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Ini adalah style list untuk Kategori */
  .produk-list {
    list-style-type: disc;
    padding-left: 20px;
    margin: 0;
    columns: 2;
    -webkit-columns: 2;
    -moz-columns: 2;
    column-gap: 1.5rem;
  }

  /* Mengatur warna link di daftar kategori */
  .produk-list li a {
    color: #ffffff;
    /* Warna teks putih */
    text-decoration: none;
    /* Hapus garis bawah default */
  }

  /* Efek hover untuk link */
  .produk-list li a:hover {
    text-decoration: underline;
    /* Tampilkan garis bawah saat hover */
  }
</style>
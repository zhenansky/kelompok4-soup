@page "/purchase-success"
@layout EmptyLayout
@using MyApp.BlazorUI.Services.Interfaces
@using MyApp.BlazorUI.DTOs.Auth
@inject IAuthService AuthService
@inject NavigationManager Navigation

<MudPaper Elevation="0" Width="100vw" Height="100vh" Class="d-flex flex-column justify-center align-center gap-10">
  <MudImage Src="/success.svg" Width="250" Height="250" />
  <MudPaper Elevation="0" Class="d-flex flex-column justify center align-center gap-2">
    <MudText Typo="Typo.h5" Class="text-title">Purchase Successfully</MudText>
    <MudText Typo="Typo.body1" Class="text-body">Horay!! Let's cook and become a professional cheff</MudText>
  </MudPaper>
  <MudStack Row="true" Spacing="4">
    <MudLink Href="/">
      <MudButton Variant="Variant.Outlined" Class="button button-outline" StartIcon="@Icons.Material.Filled.Home">
        Back to Home
      </MudButton>
    </MudLink>
    <MudLink Href="/invoice">
      <MudButton Variant="Variant.Filled" DropShadow="false" Class="button button-filled"
        StartIcon="@Icons.Material.Filled.ArrowForward">
        Open Invoice
      </MudButton>
    </MudLink>
  </MudStack>
</MudPaper>

@code {
  protected override async Task OnAfterRenderAsync(bool firstRender)
  {
    if (!firstRender)
      return;

    var authState = await AuthService.IsUserAuthenticatedAsync();
    if (!authState)
    {
      Navigation.NavigateTo("/", forceLoad: true);
    }
  }
}

<style>
  .text-title {
    font-weight: 500;
    font-size: 24px;
  }

  .text-body {
    font-weight: 400;
    font-size: 16px;
  }

  .button {
    width: 10.875rem;
    height: 3.125rem;
    color: #5B4947;
    border-radius: 6px;
    font-weight: 500;
    font-size: 15px;
    text-transform: none;
  }

  .button-filled {
    background-color: #FABC1D;
  }

  .button:hover {
    background-color: #FABC1D;
  }
</style>
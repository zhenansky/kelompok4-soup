@page "/purchase-success"
@layout EmptyLayout
@using MudBlazor
@inject NavigationManager NavigationManager

<MudContainer MaxWidth="MaxWidth.False" Class="pa-0 ma-0" Style="position: relative; min-height: 100vh;">

  <MudImage Src="images/logo.svg" Alt="Company Logo" Class="top-left-logo" />

  <MudPaper Elevation="0" Class="d-flex flex-column align-center justify-center" Style="min-height: 90vh;">

    <MudImage Src="images/SuccessPurchase.svg" Alt="Purchase Successful" Width="250" Class="mb-6" />

    <MudText Typo="Typo.h4" Align="Align.Center" GutterBottom="true" Style="font-weight: 600;">
      Purchase Successfully
    </MudText>

    <MudText Typo="Typo.h6" Align="Align.Center" Color="Color.Inherit" Class="mb-8" Style="font-weight: 400;">
      Horay!! Let's cook and become a professional cheff
    </MudText>

    <MudStack Row="true" Spacing="4">
      <MudButton Variant="Variant.Outlined" Size="Size.Large" OnClick="NavigateToHome" Class="action-button"
        Style="border-color: #E0E0E0; color: black; text-transform: none; font-weight: 600;">
        Back to Home
      </MudButton>

      <MudButton Variant="Variant.Filled" Color="Color.Warning" Size="Size.Large" OnClick="NavigateToInvoice"
        Class="action-button" Style="color: black; text-transform: none; font-weight: 600;">
        <MudIcon Icon="@Icons.Material.Filled.ArrowForward" Class="mr-2" />
        Open Invoice
      </MudButton>
    </MudStack>
  </MudPaper>

</MudContainer>

@code {
  // == PERUBAHAN: Menerima 'orderId' dari URL ==
  [Parameter]
  [SupplyParameterFromQuery]
  public string? OrderId { get; set; }

  // Konstanta yang tidak terpakai telah dihapus

  private void NavigateToHome()
  {
    NavigationManager.NavigateTo("/");
  }

  private void NavigateToInvoice()
  {
    // == PERUBAHAN: Menggunakan OrderId yang dinamis ==
    if (!string.IsNullOrEmpty(OrderId))
    {
      NavigationManager.NavigateTo($"/invoice/{OrderId}");
    }
    else
    {
      // Fallback jika OrderId tidak ada (meskipun seharusnya ada)
      NavigationManager.NavigateTo("/");
    }
  }
}

<style>
  .top-left-logo {
    position: absolute;
    top: 24px;
    left: 32px;
    width: 120px;
    height: auto;
  }

  .action-button {
    border-radius: 8px;
    padding: 10px 24px;
    font-size: 1rem;
  }
</style>